/*
 * Index page
 */
#index-page {
    position: absolute;
    width: 100%; height: 100%;
}
.index-bg {
    position: absolute;
    width: 100%; height: 100%;
    overflow: hidden;
    background-color: $theme-chisato-cream;
    background-image: url("/images/index/diandian.svg");
    background-size: 30px;
    opacity: 0;
    span {
        position: absolute;
        display: block;
        box-sizing: border-box;
        width: 200vmax;
    }
    span:nth-child(1) {
        left: 0; top: 50vmin;
        transform-origin: left;
        transform: rotate(-30deg);
        border-top: 3px dashed $theme-chisato-red;
    }
    span:nth-child(2) {
        left: 50vmin; top: 0;
        transform-origin: left;
        transform: rotate(120deg);
        border-top: 3px dashed $theme-chisato-purple;
    }
    span:nth-child(3) {
        right: 25vmin; bottom: 0;
        transform-origin: right;
        transform: rotate(105deg);
        border-top: 3px dashed $theme-chisato-red;
    }
}
/**
 * Chisato GIF 容器
 * 已移至 Profile 页面，此处隐藏
 */
.index-chisato {
    display: none; // 已移至 Profile 页面
}
.index-logo {
    position: absolute;
    width: 80vmin; 
    height: auto;
    min-height: 24vmin;
    left: calc(50% - 40vmin); 
    top: calc(50% - 12vmin);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transform: scale(0);
    z-index: 10;
    
    // 主文字容器
    .logo-main {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        
        // 主文字行
        .logo-chars-row {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-bottom: 2vmin;
        }
        
        // 单个字符样式
        .logo-char {
            display: inline-block;
            font-family: "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Yu Mincho", "YuMincho", "MS PMincho", serif;
            font-weight: bold;
            font-size: 8vmin;
            color: #333333;
            line-height: 1;
            margin: 0 0.3vmin;
            
            // 第一个字符特殊样式：白色字符在深色方块内
            &.logo-char-first {
                position: relative;
                width: 8.5vmin;
                height: 8.5vmin;
                border-radius: 0.8vmin;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                background-color: #333333;
                color: #ffffff;
                box-shadow: 0 0 8px rgba(255, 255, 255, 0.8), 
                            0 0 12px rgba(255, 255, 255, 0.6),
                            0 2px 4px rgba(255, 255, 255, 0.4);
            }
            
            // 带副标题的字符（つ）
            &.logo-char-with-sub {
                display: inline-flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
                position: relative;
            }
        }
        
        // 副标题文字样式
        .logo-sub-text {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
            color: #666666;
            font-weight: 400;
            letter-spacing: 0.05em;
            text-shadow: none;
            white-space: nowrap;
            
            // 位于字符下方的副标题（Summer）
            &.logo-sub-below {
                font-size: 2.2vmin;
                margin-top: 0.8vmin;
            }
            
            // 位于字符组上方的副标题（Gensōkyō）
            &.logo-sub-above {
                font-size: 2.2vmin;
                position: absolute;
                top: -3vmin;
                left: 50%;
                transform: translateX(-50%);
                width: auto;
                text-align: center;
            }
        }
        
        // 字符组包装器（用于定位 Gensōkyō）
        .logo-char-group-wrapper {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        // 字符组（幻想郷）- 保持水平排列和错位效果
        .logo-char-group {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            position: relative;
            
            // 内部字符水平排列，错位效果
            .logo-char {
                display: inline-block;
                margin: 0 0.3vmin;
                vertical-align: baseline;
                
                // 错位排列效果 - 让三个字有不同的垂直位置
                &.logo-char-misaligned-1 {
                    transform: translateY(-0.3vmin);
                }
                
                &.logo-char-misaligned-2 {
                    transform: translateY(0.2vmin);
                }
                
                &.logo-char-misaligned-3 {
                    transform: translateY(-0.1vmin);
                }
            }
        }
    }
    
    // 横线和星号容器
    .logo-line {
        position: relative;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        margin-top: 1vmin;
        
        // 星号
        .logo-asterisk {
            display: inline-block;
            font-size: 3vmin;
            color: #333333;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.8), 
                         0 0 12px rgba(255, 255, 255, 0.6),
                         0 2px 4px rgba(255, 255, 255, 0.4);
            margin-right: 1vmin;
            line-height: 1;
        }
        
        // 粗横线
        .logo-line-thick {
            position: absolute;
            left: 4vmin;
            width: calc(100% - 4vmin);
            height: 0.5vmin;
            background-color: #333333;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.8), 
                        0 0 12px rgba(255, 255, 255, 0.6),
                        0 2px 4px rgba(255, 255, 255, 0.4);
        }
        
        // 细横线
        .logo-line-thin {
            position: absolute;
            left: 4vmin;
            top: 0.7vmin;
            width: calc(100% - 4vmin);
            height: 0.15vmin;
            background-color: #333333;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.8), 
                        0 0 12px rgba(255, 255, 255, 0.6),
                        0 2px 4px rgba(255, 255, 255, 0.4);
        }
    }
}
#index-button {
    position: absolute;
    width: 15vmin; height: 15vmin;
    right: 5vmin; top: 5vmin;
    cursor: pointer;
    transform: scale(0);
    z-index: 1000;
    // common
    .btn-bg, .btn-main {
        position: absolute;
        width: 100%; height: 100%;
        left: 0; top: 0;
    }
    // bg
    .btn-bg::before, .btn-bg::after {
        position: absolute; content: "";
        width: 100%; height: 100%;
        background-color: $theme-index-black;
        opacity: .4;
    }
    // main
    .btn-main {
        background-color: $theme-index-black;
        // 使用 Chisato 主题色作为 hover 效果，与整体主题更协调
        &:hover { background-color: $theme-chisato-red; }
        transition: background-color .4s ease;
        .short-id {
            position: absolute;
            width: 80%; height: 80%;
            left: 10%; top: 10%;
        }
        .short-id-1 span {
            position: absolute;
            width: 25%; height: 25%;
            border: solid 1.2px $theme-index-white;
            &:nth-child(1) { left: 0; top: 0; border-right: transparent; border-bottom: transparent; }
            &:nth-child(2) { right: 0; top: 0; border-left: transparent; border-bottom: transparent; }
            &:nth-child(3) { right: 0; bottom: 0; border-left: transparent; border-top: transparent; }
            &:nth-child(4) { left: 0; bottom: 0; border-right: transparent; border-top: transparent; }
        }
        .short-id-2 span {
            position: absolute;
            width: 50%; height: 1.2px;
            background-color: $theme-index-white;
            left: 25%; top: calc(50% - 0.6px);
            transition: all .2s ease;
        }
    }
}
#index-button[data-state="close"], #index-button[data-state="init"] {
    .btn-main { &:hover { background-color: $theme-chisato-red; } }
    .btn-main .short-id-2 span {
        &:nth-child(1) { opacity: 1; }
        &:nth-child(2) { transform: translateY(-2vmin); }
        &:nth-child(3) { transform: translateY(2vmin); }
    }
}
#index-button[data-state="open"] {
    .btn-main { &:hover { background-color: $theme-chisato-purple; } }
    .btn-main .short-id-2 span {
        &:nth-child(1) { opacity: 0; }
        &:nth-child(2) { transform: rotate(45deg) translateY(0); }
        &:nth-child(3) { transform: rotate(-45deg) translateY(0); }
    }
}
.index-sns {
    position: absolute;
    width: 200vmax; height: 3px;
    right: 0; bottom: 25vmin;
    transform-origin: right;
    transform: rotate(-15deg);
    box-sizing: border-box;
    border-top: 3px dashed $theme-index-black;
    opacity: 0;
    z-index: 100;
    .inner {
        position: absolute;
        width: auto; height: auto;
        right: 8%; top: calc(50% - 3.5vmin);
    }
    a {
        position: relative; display: inline-block;
        width: 50px; height: 50px;
        margin-right: 2.5vmin;
        text-align: center;
        border-radius: 50%;
        text-decoration: none;
        color: white;
        background-color: $theme-index-black;
        font-size: 28px;
        line-height: 52px;
        box-shadow: rgba(0,0,0,.3) 0 0 15px;
        transform: scale(0);
        // 社交链接 hover 效果使用 Chisato 主题色
        &:hover { background-color: $theme-chisato-purple; }
        transition: background-color .4s ease;
        
        // 华为图标特殊样式
        .huawei-icon {
            &::before {
                content: '';
                display: inline-block;
                width: 28px !important;
                height: 28px !important;
                margin-bottom: 8px;
                background-image: url("/images/index/huawei.svg");
                background-size: contain;
                background-repeat: no-repeat;
                background-position: center;
                vertical-align: middle;
            }
        }
    }
}

/*
 * Animations
 */
.index-bg { animation: fadein .6s ease forwards; }
// Chisato GIF 动画已移至 Profile 页面
.index-logo { animation: scale-in .6s ease .2s forwards; }
#index-button {
    animation: scale-in .6s ease forwards;
    .btn-bg {
        &::before { animation: rotate-1-turn 8s linear 0.4s infinite; }
        &::after  { animation: rotate-1-turn 9s linear 0.9s infinite; }
    }
}
.index-sns {
    animation: fadein .5s ease forwards;
    a:nth-child(1) { animation: scale-in .6s ease 0.6s forwards; }
    a:nth-child(2) { animation: scale-in .6s ease 0.7s forwards; }
    a:nth-child(3) { animation: scale-in .6s ease 0.8s forwards; }
    a:nth-child(4) { animation: scale-in .6s ease 0.9s forwards; }
    a:nth-child(5) { animation: scale-in .6s ease 1.0s forwards; }
}